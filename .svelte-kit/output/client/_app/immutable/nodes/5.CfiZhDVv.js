import{l as ke,d as De,t as E,s as S,a as z,e as J}from"../chunks/DpEC42Oz.js";import{i as le}from"../chunks/CwavQbNY.js";import{ab as de,p as ue,f as $e,s as o,c as d,r as n,t as q,a as ve,u as B,ad as Ce,ae as Se,g as e,v as C,m as K,b as Q,af as T,d as qe}from"../chunks/I5jpou1v.js";import{e as re,i as oe,r as se}from"../chunks/BdoIN8DB.js";import{s as W,t as X,a as Ie}from"../chunks/C4lauY-A.js";import{b as ne}from"../chunks/CS47UUab.js";import{i as je,p as U}from"../chunks/DRaHeqgg.js";import{s as pe,d as ce,a as _e,b as Ae,i as Me}from"../chunks/C0I-sOUY.js";import{e as I}from"../chunks/D_iBFdTx.js";function ge(t,a,u){if(t.multiple)return Le(t,a);for(var p of t.options){var r=j(p);if(je(r,a)){p.selected=!0;return}}(!u||a!==void 0)&&(t.selectedIndex=-1)}function Oe(t,a){de(()=>{var u=new MutationObserver(()=>{var p=t.__value;ge(t,p)});return u.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{u.disconnect()}})}function ie(t,a,u=a){var p=!0;ke(t,"change",r=>{var c=r?"[selected]":":checked",i;if(t.multiple)i=[].map.call(t.querySelectorAll(c),j);else{var g=t.querySelector(c)??t.querySelector("option:not([disabled])");i=g&&j(g)}u(i)}),de(()=>{var r=a();if(ge(t,r,p),p&&r===void 0){var c=t.querySelector(":checked");c!==null&&(r=j(c),u(r))}t.__value=r,p=!1}),Oe(t)}function Le(t,a){for(var u of t.options)u.selected=~a.indexOf(j(u))}function j(t){return"__value"in t?t.__value:t.value}var ze=(t,a)=>a(!a()),Be=(t,a)=>{a(!a())},Ee=(t,a)=>{a()},Fe=(t,a)=>{a(!a())},Ge=E(`<button class="text-red-500 hover:text-red-700">Ã—</button> <div id="popup-modal" tabindex="-1"><div class="relative max-h-full w-full max-w-md p-4"><div class="relative rounded-lg bg-white shadow-sm dark:bg-gray-700"><button type="button" class="pressable absolute end-2.5 top-3 ms-auto inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="popup-modal"><svg class="h-3 w-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg> <span class="sr-only">Close modal</span></button> <div class="p-4 text-center md:p-5"><svg class="mx-auto mb-4 h-12 w-12 text-gray-400 dark:text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg> <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400"> </h3> <button data-modal-hide="popup-modal" type="button" class="pressable inline-flex items-center rounded-lg bg-red-600 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-red-800 focus:ring-4 focus:ring-red-300 focus:outline-none dark:focus:ring-red-800">Yes, I'm sure</button> <button data-modal-hide="popup-modal" type="button" class=" pressable ms-3 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 focus:outline-none dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white dark:focus:ring-gray-700">No, cancel</button></div></div></div></div>`,1);function Ne(t,a){ue(a,!1);const[u,p]=pe(),r=()=>_e(I,"$entretiens",u);let c=U(a,"ID",8),i=U(a,"selectedCompany",8),g=U(a,"hidden",12,!0);function s(){ce(I,B(r)[i()]=r()[i()].filter(O=>O.id!==c()),B(r)),X.success("Removed a card ID: "+c(),{position:"top-right"}),g(!0)}le();var A=Ge(),M=$e(A);M.__click=[ze,g];var b=o(M,2),f=d(b),k=d(f),h=d(k);h.__click=[Be,g];var x=o(h,2),m=o(d(x),2),D=d(m);n(m);var y=o(m,2);y.__click=[Ee,s];var $=o(y,2);$.__click=[Fe,g],n(x),n(k),n(f),n(b),q(()=>{W(b,`transit ${(g()?"disappear":" appear")??""} fixed z-50 flex h-screen max-h-full w-full items-center justify-center overflow-x-hidden overflow-y-auto backdrop-blur-xs backdrop-brightness-50 md:inset-0`),S(D,`Are you sure you want to delete card ID: ${c()??""}?`)}),z(t,A),ve(),p()}De(["click"]);var Pe=E("<button> </button>"),Re=E('<div><div class="mb-2 flex items-start justify-between"><span class="text-sm text-gray-500"> </span> <!></div> <p class="mb-2"> </p> <div class="flex items-center justify-between"><span class="text-sm"> </span> <select class="rounded border p-1 text-sm"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select></div></div>'),Ve=E('<div class="rounded-lg bg-white p-6 shadow"><h1 class="mb-4 text-2xl font-bold">Entretien</h1> <div class="mb-4"><div class=" mb-4 flex space-x-4"></div></div> <div class="mb-4 grid grid-cols-4 gap-4"><input type="datetime-local" class="rounded border p-2"> <select class="rounded border p-2"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select> <input type="text" placeholder="Description" class="rounded border p-2"> <button class="rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Add Card</button></div> <div class="grid grid-cols-3 gap-4"></div></div>');function Xe(t,a){ue(a,!1);const[u,p]=pe(),r=()=>_e(I,"$entretiens",u),c=K();let i=K("Cnh");const g=["Cnh","Goweil"];let s=K({id:0,timestamp:"",dueDate:"",status:"open",description:""});function A(){if(!e(i)||!e(s).description||!e(s).dueDate){X.error("Please fill in all required fields (company, description, and due date).",{position:"top-right"});return}C(s,e(s).id=Date.now()),C(s,e(s).timestamp=new Date().toString()),Ae(I,{...r(),[e(i)]:[...r()[e(i)]||[],{...e(s)}]}),Q(s,{id:0,timestamp:"",dueDate:"",status:"open",description:""}),X.success("Added a new card.",{position:"top-right"})}function M(v,l){ce(I,B(r)[e(i)]=r()[e(i)].map(_=>_.id===v?{..._,status:l}:_),B(r))}Ce(()=>{},()=>{Q(c,v=>{switch(v){case"open":return"bg-gray-100";case"active":return"bg-blue-100";case"done":return"bg-green-100";case"overdue":return"bg-red-100";default:return"bg-gray-100"}})}),Se(),le();var b=Ve(),f=o(d(b),2),k=d(f);re(k,5,()=>g,oe,(v,l)=>{var _=Pe(),w=d(_,!0);n(_),q(()=>{W(_,`pressable rounded border px-4 py-2 ${(e(i)===e(l)?"bg-blue-500 text-white":"")??""} `),Ie(_,"selected",e(i)===e(l)),S(w,e(l))}),J("click",_,()=>Q(i,e(l))),z(v,_)}),n(k),n(f);var h=o(f,2),x=d(h);se(x);var m=o(x,2);q(()=>{e(s),T(()=>{})});var D=d(m);D.value=(D.__value="open")==null?"":"open";var y=o(D);y.value=(y.__value="active")==null?"":"active";var $=o(y);$.value=($.__value="done")==null?"":"done";var O=o($);O.value=(O.__value="overdue")==null?"":"overdue",n(m);var F=o(m,2);se(F);var me=o(F,2);n(h);var ee=o(h,2);re(ee,5,()=>r()[e(i)],oe,(v,l,_)=>{var w=Re(),G=d(w),N=d(G),be=d(N,!0);n(N);var fe=o(N,2);Ne(fe,{get selectedCompany(){return e(i)},get ID(){return e(l).id}}),n(G);var P=o(G,2),he=d(P,!0);n(P);var te=o(P,2),R=d(te),xe=d(R);n(R);var L=o(R,2);q(()=>{e(l),T(()=>{})});var V=d(L);V.value=(V.__value="open")==null?"":"open";var Y=o(V);Y.value=(Y.__value="active")==null?"":"active";var Z=o(Y);Z.value=(Z.__value="done")==null?"":"done";var ae=o(Z);ae.value=(ae.__value="overdue")==null?"":"overdue",n(L),n(te),n(w),q((H,ye,we)=>{W(w,`rounded-lg p-4 shadow ${H??""}`),S(be,ye),S(he,e(l).description),S(xe,`Due: ${we??""}`)},[()=>e(c)(e(l).status),()=>new Date(e(l).timestamp).toLocaleString(),()=>new Date(e(l).dueDate).toLocaleDateString()],qe),ie(L,()=>e(l).status,H=>(e(l).status=H,T(()=>r()[e(i)]),Me(u,"$entretiens"))),J("change",L,()=>M(e(l).id,e(l).status)),z(v,w)}),n(ee),n(b),ne(x,()=>e(s).dueDate,v=>C(s,e(s).dueDate=v)),ie(m,()=>e(s).status,v=>C(s,e(s).status=v)),ne(F,()=>e(s).description,v=>C(s,e(s).description=v)),J("click",me,A),z(t,b),ve(),p()}export{Xe as component};
