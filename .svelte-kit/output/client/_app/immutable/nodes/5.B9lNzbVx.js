import{l as Se,d as Me,t as Y,s as q,a as J,e as X}from"../chunks/CAcwY1Ku.js";import{i as fe}from"../chunks/BAJsT-C2.js";import{C as _e,p as me,f as je,s as n,c as d,r as i,t as H,a as he,u as L,ad as Ae,ae as Ie,A as e,I as O,G as ee,B as te,af as re,F as Oe,J as qe}from"../chunks/CmPZlwSp.js";import{s as oe,t as se,e as ce,i as pe,r as ve,a as He}from"../chunks/DR7RayVE.js";import{b as ge}from"../chunks/uPyP0vYU.js";import{i as ze,p as ae}from"../chunks/DGCoerJH.js";import{s as xe,a as N,c as ye,b as ne,i as Be}from"../chunks/QFiES6kV.js";import{e as z,h as P}from"../chunks/CagLcrLm.js";function we(t,r,u){if(t.multiple)return Ze(t,r);for(var g of t.options){var o=B(g);if(ze(o,r)){g.selected=!0;return}}(!u||r!==void 0)&&(t.selectedIndex=-1)}function Fe(t,r){_e(()=>{var u=new MutationObserver(()=>{var g=t.__value;we(t,g)});return u.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{u.disconnect()}})}function be(t,r,u=r){var g=!0;Se(t,"change",o=>{var f=o?"[selected]":":checked",b;if(t.multiple)b=[].map.call(t.querySelectorAll(f),B);else{var l=t.querySelector(f)??t.querySelector("option:not([disabled])");b=l&&B(l)}u(b)}),_e(()=>{var o=r();if(we(t,o,g),g&&o===void 0){var f=t.querySelector(":checked");f!==null&&(o=B(f),u(o))}t.__value=o,g=!1}),Fe(t)}function Ze(t,r){for(var u of t.options)u.selected=~r.indexOf(B(u))}function B(t){return"__value"in t?t.__value:t.value}var Ge=(t,r)=>r(!r()),Je=(t,r)=>{r(!r())},Le=(t,r)=>{r()},Ne=(t,r)=>{r(!r())},Pe=Y(`<button class="pressable mx-0.5 flex cursor-pointer rounded-sm border px-1 hover:bg-red-500 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg></button> <div id="popup-modal" tabindex="-1"><div class="relative max-h-full w-full max-w-md p-4"><div class="relative rounded-lg bg-white shadow-sm dark:bg-gray-700"><button type="button" class="pressable absolute end-2.5 top-3 ms-auto inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="popup-modal"><svg class="h-3 w-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg> <span class="sr-only">Close modal</span></button> <div class="p-4 text-center md:p-5"><svg class="mx-auto mb-4 h-12 w-12 text-gray-400 dark:text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg> <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400"> </h3> <button data-modal-hide="popup-modal" type="button" class="pressable inline-flex items-center rounded-lg bg-red-600 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-red-800 focus:ring-4 focus:ring-red-300 focus:outline-none dark:focus:ring-red-800">Yes, I'm sure</button> <button data-modal-hide="popup-modal" type="button" class=" pressable ms-3 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 focus:outline-none dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white dark:focus:ring-gray-700">No, cancel</button></div></div></div></div>`,1);function Ye(t,r){me(r,!1);const[u,g]=xe(),o=()=>N(z,"$entretiens",u),f=()=>N(P,"$history",u);let b=ae(r,"ID",8),l=ae(r,"selectedCompany",8),m=ae(r,"hidden",12,!0);function s(){let j=o()[l()].find(x=>x.id==b());ye(z,L(o)[l()]=o()[l()].filter(x=>x.id!==b()),L(o)),se.success("Deleted a card.",{position:"top-right"}),m(!0);let A={name:"del|Deleted an entretien.",date:new Date,status:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z",object:{...j}};ne(P,[...f(),{...A}]),console.log(JSON.stringify(A,null,2))}fe();var F=Pe(),Z=je(F);Z.__click=[Ge,m];var C=n(Z,2),y=d(C),w=d(y),S=d(w);S.__click=[Je,m];var k=n(S,2),h=n(d(k),2),D=d(h);i(h);var $=n(h,2);$.__click=[Le,s];var M=n($,2);M.__click=[Ne,m],i(k),i(w),i(y),i(C),H(()=>{oe(C,`transit ${(m()?"disappear":" appear")??""} fixed z-50 flex h-screen max-h-full w-full items-center justify-center overflow-x-hidden overflow-y-auto backdrop-blur-xs backdrop-brightness-50 md:inset-0`),q(D,`Are you sure you want to delete card ID: ${b()??""}?`)}),J(t,F),he(),g()}Me(["click"]);var Ee=Y("<button> </button>"),Ve=Y('<div><div class="mb-2 flex items-start justify-between"><span class="text-sm text-gray-500"> </span> <!></div> <p class="mb-2"> </p> <div class="flex items-center justify-between"><span class="text-sm"> </span> <select class="rounded border p-1 text-sm"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select></div></div>'),Ke=Y('<div class="rounded bg-white p-6 shadow"><h1 class="mb-4 text-2xl font-bold">Entretien</h1> <div class="mb-4"><div class=" mb-4 flex space-x-4"></div></div> <div class="mb-4 grid grid-cols-4 gap-4"><input type="datetime-local" class="rounded border border-gray-300 p-2 focus:border-blue-600 focus:ring-0 focus:outline-none dark:border-gray-600 dark:text-white dark:focus:border-blue-500"> <select class="rounded border border-gray-300 p-2 focus:border-blue-600 focus:ring-0 focus:outline-none dark:border-gray-600 dark:text-white dark:focus:border-blue-500"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select> <div class="relative"><input type="text" id="floating_outlined" class="peer block w-full appearance-none rounded border-1 border-gray-300 bg-transparent px-2.5 pt-4 pb-2.5 text-sm text-gray-900 focus:border-blue-600 focus:ring-0 focus:outline-none dark:border-gray-600 dark:text-white dark:focus:border-blue-500" placeholder=""> <label for="floating_outlined" class="pointer-events-none absolute start-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 rtl:peer-focus:left-auto rtl:peer-focus:translate-x-1/4 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500">Description *</label></div> <button class=" pressable rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Add</button></div> <div class="grid grid-cols-3 gap-4"></div></div>');function rt(t,r){me(r,!1);const[u,g]=xe(),o=()=>N(z,"$entretiens",u),f=()=>N(P,"$history",u),b=ee();let l=ee("Cnh");const m=["Cnh","Goweil"];let s=ee({id:0,timestamp:"",dueDate:"",status:"open",description:""});function F(){if(!e(l)||!e(s).description||!e(s).dueDate){se.error("Please fill in all required fields (company, description, and due date).",{position:"top-right"});return}O(s,e(s).id=Date.now()),O(s,e(s).timestamp=C(new Date)),ne(z,{...o(),[e(l)]:[...o()[e(l)]||[],{...e(s)}]}),se.success("Added a new card.",{position:"top-right"});let c={name:"cre|Added a new entretien.",date:new Date,status:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z",object:{...e(s)}};ne(P,[...f(),{...c}]),te(s,{id:0,timestamp:"",dueDate:"",status:"open",description:""})}function Z(c,a){ye(z,L(o)[e(l)]=o()[e(l)].map(p=>p.id===c?{...p,status:a}:p),L(o))}function C(c){const a=new Date(c),p=a.getDate().toString().padStart(2,"0"),_=(a.getMonth()+1).toString().padStart(2,"0"),I=a.getFullYear();let v=a.getHours();const E=a.getMinutes().toString().padStart(2,"0"),V=v>=12?"PM":"AM";return v=v%12,v=v||12,v=v.toString().padStart(2,"0"),`${p}/${_}/${I} @ ${v}:${E} ${V}`}Ae(()=>{},()=>{te(b,c=>{switch(c){case"open":return"bg-gray-100";case"active":return"bg-blue-100";case"done":return"bg-green-100";case"overdue":return"bg-red-100";default:return"bg-gray-100"}})}),Ie(),fe();var y=Ke(),w=n(d(y),2),S=d(w);ce(S,5,()=>m,pe,(c,a)=>{var p=Ee(),_=d(p,!0);i(p),H(()=>{oe(p,`pressable rounded border px-4 py-2 ${(e(l)===e(a)?"bg-blue-500 text-white":"")??""} `),He(p,"selected",e(l)===e(a)),q(_,e(a))}),X("click",p,()=>te(l,e(a))),J(c,p)}),i(S),i(w);var k=n(w,2),h=d(k);ve(h);var D=n(h,2);H(()=>{e(s),re(()=>{})});var $=d(D);$.value=($.__value="open")==null?"":"open";var M=n($);M.value=(M.__value="active")==null?"":"active";var j=n(M);j.value=(j.__value="done")==null?"":"done";var A=n(j);A.value=(A.__value="overdue")==null?"":"overdue",i(D);var x=n(D,2),ie=d(x);ve(ie),Oe(2),i(x);var ke=n(x,2);i(k);var le=n(k,2);ce(le,5,()=>o()[e(l)],pe,(c,a,p)=>{var _=Ve(),I=d(_),v=d(I),E=d(v,!0);i(v);var V=n(v,2);Ye(V,{get selectedCompany(){return e(l)},get ID(){return e(a).id}}),i(I);var K=n(I,2),De=d(K,!0);i(K);var de=n(K,2),Q=d(de),$e=d(Q);i(Q);var G=n(Q,2);H(()=>{e(a),re(()=>{})});var R=d(G);R.value=(R.__value="open")==null?"":"open";var T=n(R);T.value=(T.__value="active")==null?"":"active";var U=n(T);U.value=(U.__value="done")==null?"":"done";var ue=n(U);ue.value=(ue.__value="overdue")==null?"":"overdue",i(G),i(de),i(_),H((W,Ce)=>{oe(_,`rounded p-4 shadow ${W??""}`),q(E,e(a).timestamp),q(De,e(a).description),q($e,`Due: ${Ce??""}`)},[()=>e(b)(e(a).status),()=>new Date(e(a).dueDate).toLocaleDateString()],qe),be(G,()=>e(a).status,W=>(e(a).status=W,re(()=>o()[e(l)]),Be(u,"$entretiens"))),X("change",G,()=>Z(e(a).id,e(a).status)),J(c,_)}),i(le),i(y),ge(h,()=>e(s).dueDate,c=>O(s,e(s).dueDate=c)),be(D,()=>e(s).status,c=>O(s,e(s).status=c)),ge(ie,()=>e(s).description,c=>O(s,e(s).description=c)),X("click",ke,F),J(t,y),he(),g()}export{rt as component};
