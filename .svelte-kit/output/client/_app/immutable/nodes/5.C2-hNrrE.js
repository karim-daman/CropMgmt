import{l as me,t as R,e as w,a as B}from"../chunks/DpUOHsiD.js";import"../chunks/Cu6ud-uC.js";import{N as oe,p as ge,O as xe,P as he,t as y,c as v,s as o,g as e,a as we,d as f,m as H,b as J,r as u,Q as K,u as ye,w as D}from"../chunks/ih3xEocW.js";import{s as $}from"../chunks/ofMewh1x.js";import{e as Y,a as Z,r as ee,b as C}from"../chunks/ZJ58FEJ6.js";import{s as te,t as De}from"../chunks/BYuvHWmW.js";import{b as ae}from"../chunks/COZ5gsaV.js";import{i as $e}from"../chunks/DarpmbS9.js";import{i as Ce}from"../chunks/Ds1Fm639.js";import{s as Se,a as Oe,b as ke,i as qe,c as re}from"../chunks/ndHA9DNq.js";function ne(t,d,l){if(t.multiple)return Le(t,d);for(var _ of t.options){var a=m(_);if($e(a,d)){_.selected=!0;return}}(!l||d!==void 0)&&(t.selectedIndex=-1)}function Ae(t,d){oe(()=>{var l=new MutationObserver(()=>{var _=t.__value;ne(t,_)});return l.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function se(t,d,l=d){var _=!0;me(t,"change",a=>{var c=a?"[selected]":":checked",n;if(t.multiple)n=[].map.call(t.querySelectorAll(c),m);else{var g=t.querySelector(c)??t.querySelector("option:not([disabled])");n=g&&m(g)}l(n)}),oe(()=>{var a=d();if(ne(t,a,_),_&&a===void 0){var c=t.querySelector(":checked");c!==null&&(a=m(c),l(a))}t.__value=a,_=!1}),Ae(t)}function Le(t,d){for(var l of t.options)l.selected=~d.indexOf(m(l))}function m(t){return"__value"in t?t.__value:t.value}var je=R("<button> </button>"),Ee=R('<div><div class="mb-2 flex items-start justify-between"><span class="text-sm text-gray-500"> </span> <button class="text-red-500 hover:text-red-700">Ã—</button></div> <p class="mb-2"> </p> <div class="flex items-center justify-between"><span class="text-sm"> </span> <select class="rounded border p-1 text-sm"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select></div></div>'),Fe=R('<div class="rounded-lg bg-white p-6 shadow"><h1 class="mb-4 text-2xl font-bold">Entretien</h1> <div class="mb-4"><div class=" mb-4 flex space-x-4"></div></div> <div class="mb-4 grid grid-cols-4 gap-4"><input type="datetime-local" class="rounded border p-2"> <select class="rounded border p-2"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select> <input type="text" placeholder="Description" class="rounded border p-2"> <button class="rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Add Card</button></div> <div class="grid grid-cols-3 gap-4"></div></div>');function Ke(t,d){ge(d,!1);const[l,_]=Se(),a=()=>Oe(C,"$entretiens",l),c=H();let n=H("Cnh");const g=["Cnh","Goweil"];let s=H({id:0,timestamp:"",dueDate:"",status:"open",description:""});function ie(){f(s,e(s).id=Date.now()),f(s,e(s).timestamp=new Date().toString()),ke(C,{...a(),[e(n)]:[...a()[e(n)]||[],{...e(s)}]}),J(s,{id:0,timestamp:"",dueDate:"",status:"open",description:""})}function ue(i){re(C,D(a)[e(n)]=a()[e(n)].filter(r=>r.id!==i),D(a))}function le(i,r){re(C,D(a)[e(n)]=a()[e(n)].map(p=>p.id===i?{...p,status:r}:p),D(a))}xe(()=>{},()=>{J(c,i=>{switch(i){case"open":return"bg-gray-100";case"active":return"bg-blue-100";case"done":return"bg-green-100";case"overdue":return"bg-red-100";default:return"bg-gray-100"}})}),he(),Ce();var S=Fe(),O=o(v(S),2),T=v(O);Y(T,5,()=>g,Z,(i,r)=>{var p=je(),b=v(p,!0);u(p),y(()=>{te(p,`pressable rounded border px-4 py-2 ${(e(n)===e(r)?"bg-blue-500 text-white":"")??""} `),De(p,"selected",e(n)===e(r)),$(b,e(r))}),w("click",p,()=>J(n,e(r))),B(i,p)}),u(T),u(O);var k=o(O,2),q=v(k);ee(q);var x=o(q,2);y(()=>{e(s),K(()=>{})});var A=v(x);A.value=(A.__value="open")==null?"":"open";var L=o(A);L.value=(L.__value="active")==null?"":"active";var j=o(L);j.value=(j.__value="done")==null?"":"done";var U=o(j);U.value=(U.__value="overdue")==null?"":"overdue",u(x);var E=o(x,2);ee(E);var ve=o(E,2);u(k);var V=o(k,2);Y(V,5,()=>a()[e(n)],Z,(i,r,p)=>{var b=Ee(),F=v(b),G=v(F),de=v(G,!0);u(G);var pe=o(G,2);u(F);var I=o(F,2),_e=v(I,!0);u(I);var W=o(I,2),M=v(W),ce=v(M);u(M);var h=o(M,2);y(()=>{e(r),K(()=>{})});var N=v(h);N.value=(N.__value="open")==null?"":"open";var P=o(N);P.value=(P.__value="active")==null?"":"active";var Q=o(P);Q.value=(Q.__value="done")==null?"":"done";var X=o(Q);X.value=(X.__value="overdue")==null?"":"overdue",u(h),u(W),u(b),y((z,be,fe)=>{te(b,`rounded-lg p-4 shadow ${z??""}`),$(de,be),$(_e,e(r).description),$(ce,`Due: ${fe??""}`)},[()=>e(c)(e(r).status),()=>new Date(e(r).timestamp).toLocaleString(),()=>new Date(e(r).dueDate).toLocaleDateString()],ye),w("click",pe,()=>ue(e(r).id)),se(h,()=>e(r).status,z=>(e(r).status=z,K(()=>a()[e(n)]),qe(l,"$entretiens"))),w("change",h,()=>le(e(r).id,e(r).status)),B(i,b)}),u(V),u(S),ae(q,()=>e(s).dueDate,i=>f(s,e(s).dueDate=i)),se(x,()=>e(s).status,i=>f(s,e(s).status=i)),ae(E,()=>e(s).description,i=>f(s,e(s).description=i)),w("click",ve,ie),B(t,S),we(),_()}export{Ke as component};
