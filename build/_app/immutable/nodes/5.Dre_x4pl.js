import{l as me,t as T,e as y,a as B}from"../chunks/C2-o_NFQ.js";import"../chunks/CBx1LQFb.js";import{N as se,p as be,O as ge,P as xe,t as D,c as v,s as n,g as e,a as he,b,m as H,d as J,r as u,Q as K,w as m,u as we}from"../chunks/DAxARKWz.js";import{s as $}from"../chunks/DuW1ju0T.js";import{e as Z,d as ee,r as te,a as C}from"../chunks/Drn6uLDc.js";import{t as ye,s as De}from"../chunks/BTFpkzQ7.js";import{b as ae}from"../chunks/DEjcX7-a.js";import{i as $e}from"../chunks/BGQnQNT8.js";import{i as Ce}from"../chunks/Bv01v2jc.js";import{a as Se,s as Oe,c as R,i as ke}from"../chunks/AsitmpWD.js";function ne(t,d,l){if(t.multiple)return Ae(t,d);for(var p of t.options){var a=g(p);if($e(a,d)){p.selected=!0;return}}(!l||d!==void 0)&&(t.selectedIndex=-1)}function qe(t,d){se(()=>{var l=new MutationObserver(()=>{var p=t.__value;ne(t,p)});return l.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function re(t,d,l=d){var p=!0;me(t,"change",a=>{var c=a?"[selected]":":checked",i;if(t.multiple)i=[].map.call(t.querySelectorAll(c),g);else{var x=t.querySelector(c)??t.querySelector("option:not([disabled])");i=x&&g(x)}l(i)}),se(()=>{var a=d();if(ne(t,a,p),p&&a===void 0){var c=t.querySelector(":checked");c!==null&&(a=g(c),l(a))}t.__value=a,p=!1}),qe(t)}function Ae(t,d){for(var l of t.options)l.selected=~d.indexOf(g(l))}function g(t){return"__value"in t?t.__value:t.value}var Le=T('<button class="pressable rounded border px-4 py-2"> </button>'),je=T('<div><div class="mb-2 flex items-start justify-between"><span class="text-sm text-gray-500"> </span> <button class="text-red-500 hover:text-red-700">Ã—</button></div> <p class="mb-2"> </p> <div class="flex items-center justify-between"><span class="text-sm"> </span> <select class="rounded border p-1 text-sm"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select></div></div>'),Ee=T('<div class="rounded-lg bg-white p-6 shadow"><h1 class="mb-4 text-2xl font-bold">Entretien</h1> <div class="mb-4"><div class=" mb-4 flex space-x-4"></div></div> <div class="mb-4 grid grid-cols-4 gap-4"><input type="datetime-local" class="rounded border p-2"> <select class="rounded border p-2"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select> <input type="text" placeholder="Description" class="rounded border p-2"> <button class="rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Add Card</button></div> <div class="grid grid-cols-3 gap-4"></div></div>');function Je(t,d){be(d,!1);const[l,p]=Se(),a=()=>Oe(C,"$entretiens",l),c=H();let i=H("Cnh");const x=["Cnh","Goweil"];let s=H({id:0,timestamp:"",dueDate:"",status:"open",description:""});function oe(){b(s,e(s).id=Date.now()),b(s,e(s).timestamp=new Date().toString()),R(C,m(a)[e(i)]=[...a()[e(i)],{...e(s)}],m(a)),J(s,{id:0,timestamp:"",dueDate:"",status:"open",description:""})}function ie(o){R(C,m(a)[e(i)]=a()[e(i)].filter(r=>r.id!==o),m(a))}function ue(o,r){R(C,m(a)[e(i)]=a()[e(i)].map(_=>_.id===o?{..._,status:r}:_),m(a))}ge(()=>{},()=>{J(c,o=>{switch(o){case"open":return"bg-gray-100";case"active":return"bg-blue-100";case"done":return"bg-green-100";case"overdue":return"bg-red-100";default:return"bg-gray-100"}})}),xe(),Ce();var S=Ee(),O=n(v(S),2),U=v(O);Z(U,5,()=>x,ee,(o,r)=>{var _=Le(),f=v(_,!0);u(_),D(()=>{ye(_,"selected",e(i)===e(r)),$(f,e(r))}),y("click",_,()=>J(i,e(r))),B(o,_)}),u(U),u(O);var k=n(O,2),q=v(k);te(q);var h=n(q,2);D(()=>{e(s),K(()=>{})});var A=v(h);A.value=(A.__value="open")==null?"":"open";var L=n(A);L.value=(L.__value="active")==null?"":"active";var j=n(L);j.value=(j.__value="done")==null?"":"done";var V=n(j);V.value=(V.__value="overdue")==null?"":"overdue",u(h);var E=n(h,2);te(E);var le=n(E,2);u(k);var W=n(k,2);Z(W,5,()=>a()[e(i)],ee,(o,r,_)=>{var f=je(),F=v(f),G=v(F),ve=v(G,!0);u(G);var de=n(G,2);u(F);var I=n(F,2),pe=v(I,!0);u(I);var X=n(I,2),M=v(X),_e=v(M);u(M);var w=n(M,2);D(()=>{e(r),K(()=>{})});var N=v(w);N.value=(N.__value="open")==null?"":"open";var P=n(N);P.value=(P.__value="active")==null?"":"active";var Q=n(P);Q.value=(Q.__value="done")==null?"":"done";var Y=n(Q);Y.value=(Y.__value="overdue")==null?"":"overdue",u(w),u(X),u(f),D((z,ce,fe)=>{De(f,`rounded-lg p-4 shadow ${z??""}`),$(ve,ce),$(pe,e(r).description),$(_e,`Due: ${fe??""}`)},[()=>e(c)(e(r).status),()=>new Date(e(r).timestamp).toLocaleString(),()=>new Date(e(r).dueDate).toLocaleDateString()],we),y("click",de,()=>ie(e(r).id)),re(w,()=>e(r).status,z=>(e(r).status=z,K(()=>a()[e(i)]),ke(l,"$entretiens"))),y("change",w,()=>ue(e(r).id,e(r).status)),B(o,f)}),u(W),u(S),ae(q,()=>e(s).dueDate,o=>b(s,e(s).dueDate=o)),re(h,()=>e(s).status,o=>b(s,e(s).status=o)),ae(E,()=>e(s).description,o=>b(s,e(s).description=o)),y("click",le,oe),B(t,S),he(),p()}export{Je as component};
