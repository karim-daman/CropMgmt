import{l as ge,t as N,e as w,a as B,s as y}from"../chunks/DwQ4lwh6.js";import"../chunks/BUcacFcE.js";import{O as ie,p as xe,P as he,Q as we,t as D,c as v,s as o,g as e,a as ye,d as f,m as H,b as J,r as u,R as K,w as De,y as $}from"../chunks/C_J4HtAr.js";import{e as Y,i as Z,r as ee}from"../chunks/BKgT4Wn9.js";import{s as te,t as $e}from"../chunks/BKy9mIs-.js";import{b as ae}from"../chunks/DUvxqKNj.js";import{i as Ce}from"../chunks/DP8Qqesn.js";import{i as Se}from"../chunks/B8IoFYXI.js";import{s as Oe,a as ke,b as qe,i as Ae,c as se}from"../chunks/BstwTP-J.js";import{t as re}from"../chunks/tVoJ7FNx.js";import{e as C}from"../chunks/pzeAkxxs.js";function ne(t,d,l){if(t.multiple)return je(t,d);for(var c of t.options){var a=b(c);if(Ce(a,d)){c.selected=!0;return}}(!l||d!==void 0)&&(t.selectedIndex=-1)}function Le(t,d){ie(()=>{var l=new MutationObserver(()=>{var c=t.__value;ne(t,c)});return l.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function oe(t,d,l=d){var c=!0;ge(t,"change",a=>{var _=a?"[selected]":":checked",i;if(t.multiple)i=[].map.call(t.querySelectorAll(_),b);else{var g=t.querySelector(_)??t.querySelector("option:not([disabled])");i=g&&b(g)}l(i)}),ie(()=>{var a=d();if(ne(t,a,c),c&&a===void 0){var _=t.querySelector(":checked");_!==null&&(a=b(_),l(a))}t.__value=a,c=!1}),Le(t)}function je(t,d){for(var l of t.options)l.selected=~d.indexOf(b(l))}function b(t){return"__value"in t?t.__value:t.value}var Re=N("<button> </button>"),Ee=N('<div><div class="mb-2 flex items-start justify-between"><span class="text-sm text-gray-500"> </span> <button class="text-red-500 hover:text-red-700">Ã—</button></div> <p class="mb-2"> </p> <div class="flex items-center justify-between"><span class="text-sm"> </span> <select class="rounded border p-1 text-sm"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select></div></div>'),Fe=N('<div class="rounded-lg bg-white p-6 shadow"><h1 class="mb-4 text-2xl font-bold">Entretien</h1> <div class="mb-4"><div class=" mb-4 flex space-x-4"></div></div> <div class="mb-4 grid grid-cols-4 gap-4"><input type="datetime-local" class="rounded border p-2"> <select class="rounded border p-2"><option>Open</option><option>Active</option><option>Done</option><option>Overdue</option></select> <input type="text" placeholder="Description" class="rounded border p-2"> <button class="rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Add Card</button></div> <div class="grid grid-cols-3 gap-4"></div></div>');function Te(t,d){xe(d,!1);const[l,c]=Oe(),a=()=>ke(C,"$entretiens",l),_=H();let i=H("Cnh");const g=["Cnh","Goweil"];let r=H({id:0,timestamp:"",dueDate:"",status:"open",description:""});function ue(){f(r,e(r).id=Date.now()),f(r,e(r).timestamp=new Date().toString()),qe(C,{...a(),[e(i)]:[...a()[e(i)]||[],{...e(r)}]}),J(r,{id:0,timestamp:"",dueDate:"",status:"open",description:""}),re.success("Added a new card.",{position:"top-right"})}function le(n){se(C,$(a)[e(i)]=a()[e(i)].filter(s=>s.id!==n),$(a)),re.success("Removed a card.",{position:"top-right"})}function ve(n,s){se(C,$(a)[e(i)]=a()[e(i)].map(p=>p.id===n?{...p,status:s}:p),$(a))}he(()=>{},()=>{J(_,n=>{switch(n){case"open":return"bg-gray-100";case"active":return"bg-blue-100";case"done":return"bg-green-100";case"overdue":return"bg-red-100";default:return"bg-gray-100"}})}),we(),Se();var S=Fe(),O=o(v(S),2),T=v(O);Y(T,5,()=>g,Z,(n,s)=>{var p=Re(),m=v(p,!0);u(p),D(()=>{te(p,`pressable rounded border px-4 py-2 ${(e(i)===e(s)?"bg-blue-500 text-white":"")??""} `),$e(p,"selected",e(i)===e(s)),y(m,e(s))}),w("click",p,()=>J(i,e(s))),B(n,p)}),u(T),u(O);var k=o(O,2),q=v(k);ee(q);var x=o(q,2);D(()=>{e(r),K(()=>{})});var A=v(x);A.value=(A.__value="open")==null?"":"open";var L=o(A);L.value=(L.__value="active")==null?"":"active";var j=o(L);j.value=(j.__value="done")==null?"":"done";var U=o(j);U.value=(U.__value="overdue")==null?"":"overdue",u(x);var R=o(x,2);ee(R);var de=o(R,2);u(k);var V=o(k,2);Y(V,5,()=>a()[e(i)],Z,(n,s,p)=>{var m=Ee(),E=v(m),F=v(E),pe=v(F,!0);u(F);var ce=o(F,2);u(E);var G=o(E,2),_e=v(G,!0);u(G);var W=o(G,2),I=v(W),me=v(I);u(I);var h=o(I,2);D(()=>{e(s),K(()=>{})});var M=v(h);M.value=(M.__value="open")==null?"":"open";var P=o(M);P.value=(P.__value="active")==null?"":"active";var Q=o(P);Q.value=(Q.__value="done")==null?"":"done";var X=o(Q);X.value=(X.__value="overdue")==null?"":"overdue",u(h),u(W),u(m),D((z,fe,be)=>{te(m,`rounded-lg p-4 shadow ${z??""}`),y(pe,fe),y(_e,e(s).description),y(me,`Due: ${be??""}`)},[()=>e(_)(e(s).status),()=>new Date(e(s).timestamp).toLocaleString(),()=>new Date(e(s).dueDate).toLocaleDateString()],De),w("click",ce,()=>le(e(s).id)),oe(h,()=>e(s).status,z=>(e(s).status=z,K(()=>a()[e(i)]),Ae(l,"$entretiens"))),w("change",h,()=>ve(e(s).id,e(s).status)),B(n,m)}),u(V),u(S),ae(q,()=>e(r).dueDate,n=>f(r,e(r).dueDate=n)),oe(x,()=>e(r).status,n=>f(r,e(r).status=n)),ae(R,()=>e(r).description,n=>f(r,e(r).description=n)),w("click",de,ue),B(t,S),ye(),c()}export{Te as component};
